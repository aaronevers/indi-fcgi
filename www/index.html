<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>Test</title>
        <link type="text/css" href="css/vader/jquery-ui-1.10.2.custom.css" rel="stylesheet" />
        <script language="JavaScript" type="text/javascript" src="js/jquery-1.9.1.js"></script>
        <script language="JavaScript" type="text/javascript" src="js/jquery-ui-1.10.2.custom.js"></script>
        <script language="JavaScript" type="text/javascript" src="utility.js"></script>
        <script language="JavaScript" type="text/javascript" src="main.js"></script>
    </head>
    <body>
        <div id="position" class="ui-widget">
            <table width="100%">
                <tr>
                    <td colspan="4" id="positionstate"></td>
                </tr>
                <tr>
                    <td width="10%"><label>Az:</label></td>
                    <td width="20%"><label id="az"></label></td>
                    <td width="20%"><input id="azinput"></input></td>
                    <td width="50%" id="azelstate"></td>
                    <script>
                        propertyCallbacks["Telescope.SetAltAz"] = function(xml) { updateState("#azelstate", xml); };
                    </script>
                </tr>
                <tr>
                    <td><label>El:</label></td>
                    <td><label id="el"></label></td>
                    <td><input id="elinput"></input></td>
                    <td><center><button id="trackazel">Track Az/El</button></center></td>
                    <script>
                        $("#trackazel")
                            .button()
                            .click(function() {setindi("<set type='Number' property='Telescope.SetAltAz' Alt='" + $("#elinput").val() + "' Az='" + $("#azinput").val() + "'/>")});
                    </script>
                </tr>
                <tr>
                    <td><label>RA:</label></td>
                    <td><label id="ra"></label></td>
                    <td><input id="rainput"></input></td>
                    <td id="radecstate"></td>
                    <script>
                        propertyCallbacks["Telescope.SetRADec2K"] = function(xml) { updateState("#radecstate", xml); };
                    </script>
                </tr>
                <tr>
                    <td><label>Dec:</label></td>
                    <td><label id="dec"></label></td>
                    <td><input id="decinput"></input></td>
                    <td><center><button id="trackradec">Track RA/Dec</button></center></td>
                    <script>
                        $("#trackradec")
                            .button()
                            .click(function() {setindi("<set type='Number' property='Telescope.SetRADec2K' RA='" + $("#rainput").val() + "' Dec='" + $("#decinput").val() + "'/>")});
                    </script>
                </tr>
                <script>
                    propertyCallbacks["Telescope.Pointing"] = function(xml) {
                        updateState("#positionstate", xml)

                        $("oneNumber", xml).each(function(i) {
                            var name = $(this).attr("name");
                            if (name == "Az") {
                                var d = $(this).text()
                                d = dec2dms(d, 3, 3)
                                $("#az").html(d);
                            }
                            else if (name == "Alt") {
                                var d = $(this).text()
                                d = dec2dms(d, 3, 3)
                                $("#el").html(d);
                            }
                            else if (name == "RA2K") {
                                var d = $(this).text()
                                d = dec2dms(d, 2, 3)
                                $("#ra").html(d);
                            }
                            else if (name == "Dec2K") {
                                var d = $(this).text()
                                d = dec2dms(d, 3, 3)
                                $("#dec").html(d);
                            }
                        });
                    };
                </script>
            </table>
        </div>
    </body>
</html>
